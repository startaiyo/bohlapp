{"ast":null,"code":"var _jsxFileName = \"/Users/startaiyo/bohl/bohlapp/src/components/submitform.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport qs from 'qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Container extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedFile: null,\n      keyname: null,\n      results: [],\n      f_data: []\n    };\n\n    this.fileSelectedHandler = event => {\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.fileUploadHandler = e => {\n      const fd = new FormData();\n      fd.append('image', this.state.selectedFile, this.state.selectedFile.name);\n      axios.post('https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/', fd).then(response => {\n        console.log(response);\n        this.setState({\n          keyname: response.data['key']\n        });\n      }).then(() => {\n        setTimeout(() => {\n          axios.get(`https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/${this.state.keyname}`).then(res => {\n            console.log(res.data);\n            this.setState({\n              results: res.data\n            });\n          });\n        }, 10000);\n      }).catch(e => {\n        console.log(e);\n      });\n      e.preventDefault();\n    };\n\n    this.dataGetter = e => {\n      e.preventDefault();\n      axios.get(`https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/${this.state.keyname}`).then(res => {\n        console.log(res.data);\n        this.setState({\n          results: res.data\n        });\n      });\n    };\n\n    this.dataRegister = e => {\n      let num = Number(e.target.value);\n      let data = this.state.results[num];\n      let ui = window.location.search;\n      data.user_id = {};\n      this.setState({\n        f_data: this.state.results[num].user_id\n      });\n    };\n\n    this.dataSubmitter = e => {\n      e.preventDefault();\n      const fd = qs.stringify(this.state.f_data);\n      axios.post('http://127.0.0.1:8000/meals/register/', fd).then(res => {\n        console.log(res);\n      });\n    };\n  }\n\n  render() {\n    const rs = this.state.results.map((item, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: index,\n          onChange: this.dataRegister,\n          checked: this.state.f_data['food_name'] === item.food_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 75\n        }, this), item.food_name]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 56\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 53\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"img\",\n          children: \"\\u753B\\u50CF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"img\",\n          type: \"file\",\n          onChange: this.fileSelectedHandler,\n          encType: \"image/jpeg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.fileUploadHandler,\n          children: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.dataGetter,\n          children: \"get\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.dataSubmitter,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: rs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u4ECA\\u65E5\\u306E\\u98DF\\u4E8B\\u3092\\u66F4\\u65B0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default Container;","map":{"version":3,"sources":["/Users/startaiyo/bohl/bohlapp/src/components/submitform.js"],"names":["axios","React","Component","qs","Container","state","selectedFile","keyname","results","f_data","fileSelectedHandler","event","setState","target","files","fileUploadHandler","e","fd","FormData","append","name","post","then","response","console","log","data","setTimeout","get","res","catch","preventDefault","dataGetter","dataRegister","num","Number","value","ui","window","location","search","user_id","dataSubmitter","stringify","render","rs","map","item","index","food_name"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, {Component}from 'react';\nimport qs from 'qs';\nclass Container extends Component {\n  state ={\n    selectedFile: null,\n    keyname: null,\n    results: [],\n    f_data: []\n  }\n  fileSelectedHandler = event => {\n    this.setState({\n      selectedFile: event.target.files[0]\n    })\n  } \n  fileUploadHandler = e =>{\n    const fd = new FormData();\n    fd.append('image', this.state.selectedFile,this.state.selectedFile.name);\n    axios.post('https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/',fd).then((response)=>{console.log(response); this.setState({keyname: response.data['key']})}).then(()=>{setTimeout(()=>{axios.get(`https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/${this.state.keyname}`).then( (res)=>{ console.log(res.data); this.setState({results: res.data})})},10000)}).catch((e)=>{console.log(e);})\n    e.preventDefault();\n  }\n  dataGetter = e =>{\n    e.preventDefault();\n    axios.get(`https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/${this.state.keyname}`).then( (res)=>{ console.log(res.data); this.setState({results: res.data})})\n  }\n  dataRegister = e =>{\n    let num = Number(e.target.value)\n    let data = this.state.results[num]\n    let ui = window.location.search\n    data.user_id = {}\n    this.setState({\n      f_data: this.state.results[num].user_id\n    })\n  }\n  dataSubmitter = e => {\n    e.preventDefault();\n    const fd=qs.stringify(this.state.f_data)\n    axios.post('http://127.0.0.1:8000/meals/register/',fd).then((res)=>{console.log(res);})\n  }\n  render(){\n    const rs = this.state.results.map((item,index)=><p><label key={index}><input type=\"radio\" value={index} onChange={this.dataRegister} checked={this.state.f_data['food_name'] === item.food_name}/>{item.food_name}</label></p>)\n    return (\n    <div> \n      <form>\n          <label htmlFor=\"img\">画像</label>\n          <input id=\"img\" type=\"file\" onChange={this.fileSelectedHandler} encType=\"image/jpeg\"/>\n          <button onClick={this.fileUploadHandler}>send</button>\n          <button onClick={this.dataGetter}>get</button>\n      </form>\n      <form onSubmit={this.dataSubmitter}>\n        <p>{rs}</p>\n        <button>今日の食事を更新</button>\n      </form>\n    </div>\n   );\n  }\n}\nexport default Container;"]},"metadata":{},"sourceType":"module"}