{"ast":null,"code":"var _jsxFileName = \"/Users/startaiyo/bohl/bohlapp/src/components/submitform.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState, useRef, useCallback } from 'react';\nimport Dropzone from 'react-dropzone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction InputFile() {\n  _s();\n\n  const [file, setFile] = useState(null);\n  const onChangeHandler = useCallback(e => {\n    // ファイル選択がキャンセルされた時は undefined\n    const file = e.target.files[0];\n    setFile(() => {\n      return file ? file : null;\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: onChangeHandler\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 12\n  }, this);\n}\n\n_s(InputFile, \"EQFRAl7kQC2vsSgUtxBgaGr9dMc=\");\n\n_c = InputFile;\n\nfunction PostForm() {\n  _s2();\n\n  const API_URL = \"https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/\";\n  const ref = useRef(null);\n  const onPostForm = useCallback(async data => {\n    try {\n      // Object の data を FormData 形式に変換する\n      const params = new FormData();\n      Object.keys(data).forEach(function (key) {\n        params.append(key, this[key]);\n      }, data);\n      const res = await axios.post(API_URL, params, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      console.log(res);\n    } catch (err) {\n      console.log(err);\n    }\n  }, []);\n  const onSubmitHandler = useCallback(e => {\n    e.preventDefault();\n    console.log(onPostForm);\n    onPostForm({\n      file: ref.current.files[0]\n    });\n  }, [onPostForm]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmitHandler,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 7\n  }, this);\n}\n\n_s2(PostForm, \"JXm5Sv2+UJUzo6p/7Y3bL4w96EA=\");\n\n_c2 = PostForm;\nexport { InputFile, PostForm };\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"InputFile\");\n$RefreshReg$(_c2, \"PostForm\");","map":{"version":3,"sources":["/Users/startaiyo/bohl/bohlapp/src/components/submitform.js"],"names":["axios","React","useState","useRef","useCallback","Dropzone","InputFile","file","setFile","onChangeHandler","e","target","files","PostForm","API_URL","ref","onPostForm","data","params","FormData","Object","keys","forEach","key","append","res","post","headers","console","log","err","onSubmitHandler","preventDefault","current"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAcC,QAAd,EAAwBC,MAAxB,EAAgCC,WAAhC,QAAkD,OAAlD;AACA,OAAOC,QAAP,MAAqB,gBAArB;;;AACA,SAASC,SAAT,GAAqB;AAAA;;AACjB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMO,eAAe,GAAGL,WAAW,CAAEM,CAAD,IAAO;AACzC;AACA,UAAMH,IAAI,GAAGG,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;AACAJ,IAAAA,OAAO,CAAC,MAAM;AACZ,aAAOD,IAAI,GAAGA,IAAH,GAAU,IAArB;AACD,KAFM,CAAP;AAGD,GANkC,EAMhC,EANgC,CAAnC;AAQA,sBAAO;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,MAAM,EAAC,SAA1B;AAAoC,IAAA,QAAQ,EAAEE;AAA9C;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;GAZMH,S;;KAAAA,S;;AAcT,SAASO,QAAT,GAAoB;AAAA;;AAChB,QAAMC,OAAO,GAAG,+EAAhB;AACA,QAAMC,GAAG,GAAGZ,MAAM,CAAC,IAAD,CAAlB;AAEA,QAAMa,UAAU,GAAGZ,WAAW,CAAC,MAAMa,IAAN,IAAe;AAC5C,QAAI;AACF;AACA,YAAMC,MAAM,GAAG,IAAIC,QAAJ,EAAf;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0B,UAASC,GAAT,EAAc;AACtCL,QAAAA,MAAM,CAACM,MAAP,CAAcD,GAAd,EAAmB,KAAKA,GAAL,CAAnB;AACD,OAFD,EAEGN,IAFH;AAGA,YAAMQ,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,IAAN,CAAWZ,OAAX,EAAoBI,MAApB,EAA4B;AAC5CS,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADmC,OAA5B,CAAlB;AAKAC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACD,KAZD,CAYE,OAAMK,GAAN,EAAW;AACXF,MAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,GAhB6B,EAgB3B,EAhB2B,CAA9B;AAkBA,QAAMC,eAAe,GAAG3B,WAAW,CAAEM,CAAD,IAAO;AACzCA,IAAAA,CAAC,CAACsB,cAAF;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYb,UAAZ;AACAA,IAAAA,UAAU,CAAC;AACTT,MAAAA,IAAI,EAAEQ,GAAG,CAACkB,OAAJ,CAAYrB,KAAZ,CAAkB,CAAlB;AADG,KAAD,CAAV;AAGD,GANkC,EAMhC,CAACI,UAAD,CANgC,CAAnC;AAQA,sBACE;AAAM,IAAA,QAAQ,EAAEe,eAAhB;AAAA,4BACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,MAAM,EAAC,SAA1B;AAAoC,MAAA,GAAG,EAAEhB;AAAzC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD;;IApCMF,Q;;MAAAA,Q;AAqCT,SAAQP,SAAR,EAAmBO,QAAnB","sourcesContent":["import axios from 'axios';\nimport React,{useState, useRef, useCallback} from 'react';\nimport Dropzone from 'react-dropzone';\nfunction InputFile() {\n    const [file, setFile] = useState(null);\n    \n    const onChangeHandler = useCallback((e) => {\n      // ファイル選択がキャンセルされた時は undefined\n      const file = e.target.files[0];\n      setFile(() => {\n        return file ? file : null;\n      });\n    }, []);\n  \n    return <input type=\"file\" accept=\"image/*\" onChange={onChangeHandler} />\n  }  \n\nfunction PostForm() {\n    const API_URL = \"https://vyq3zznjx3.execute-api.ap-northeast-1.amazonaws.com/default/bohlfunc/\"\n    const ref = useRef(null);\n  \n    const onPostForm = useCallback(async(data) => {\n      try {\n        // Object の data を FormData 形式に変換する\n        const params = new FormData();\n        Object.keys(data).forEach(function(key) {\n          params.append(key, this[key]);\n        }, data);\n        const res = await axios.post(API_URL, params, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n        console.log(res);\n      } catch(err) {\n        console.log(err);\n      }\n    }, []);\n    \n    const onSubmitHandler = useCallback((e) => {\n      e.preventDefault();\n      console.log(onPostForm)\n      onPostForm({\n        file: ref.current.files[0],\n      });\n    }, [onPostForm]);\n  \n    return (\n      <form onSubmit={onSubmitHandler}>\n        <input type=\"file\" accept=\"image/*\" ref={ref} />\n        <button type=\"submit\">send</button>\n      </form>\n    );\n  }\nexport {InputFile, PostForm}"]},"metadata":{},"sourceType":"module"}