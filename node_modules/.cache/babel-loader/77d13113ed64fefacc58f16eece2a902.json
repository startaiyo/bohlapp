{"ast":null,"code":"var _jsxFileName = \"/Users/startaiyo/bohl/bohlapp/src/components/submitform.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport Dropzone from 'react-dropzone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction InputFile() {\n  _s();\n\n  const [file, setFile] = useState(null);\n  const onChangeHandler = useCallback(e => {\n    // ファイル選択がキャンセルされた時は undefined\n    const file = e.target.files[0];\n    setFile(() => {\n      return file ? file : null;\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: onChangeHandler\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 12\n  }, this);\n}\n\n_s(InputFile, \"EQFRAl7kQC2vsSgUtxBgaGr9dMc=\");\n\n_c = InputFile;\n\nfunction PostForm() {\n  _s2();\n\n  const ref = useRef(null);\n  const onPostForm = useCallback(async data => {\n    try {\n      // Object の data を FormData 形式に変換する\n      const params = new FormData();\n      Object.keys(data).forEach(function (key) {\n        params.append(key, this[key]);\n      }, data);\n      const res = await axios.post(API_URL, params, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      console.log(res);\n    } catch (err) {\n      console.log(err);\n    }\n  }, []);\n  const onSubmitHandler = useCallback(e => {\n    e.preventDefault();\n    onPostForm({\n      file: ref.current.files[0]\n    });\n  }, [onPostForm]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmitHandler,\n    children: /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 7\n  }, this);\n}\n\n_s2(PostForm, \"JXm5Sv2+UJUzo6p/7Y3bL4w96EA=\");\n\n_c2 = PostForm;\nexport { InputFile, PostForm };\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"InputFile\");\n$RefreshReg$(_c2, \"PostForm\");","map":{"version":3,"sources":["/Users/startaiyo/bohl/bohlapp/src/components/submitform.js"],"names":["axios","React","useState","Dropzone","InputFile","file","setFile","onChangeHandler","useCallback","e","target","files","PostForm","ref","useRef","onPostForm","data","params","FormData","Object","keys","forEach","key","append","res","post","API_URL","headers","console","log","err","onSubmitHandler","preventDefault","current"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAcC,QAAd,QAA6B,OAA7B;AACA,OAAOC,QAAP,MAAqB,gBAArB;;;AACA,SAASC,SAAT,GAAqB;AAAA;;AACjB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBJ,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMK,eAAe,GAAGC,WAAW,CAAEC,CAAD,IAAO;AACzC;AACA,UAAMJ,IAAI,GAAGI,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;AACAL,IAAAA,OAAO,CAAC,MAAM;AACZ,aAAOD,IAAI,GAAGA,IAAH,GAAU,IAArB;AACD,KAFM,CAAP;AAGD,GANkC,EAMhC,EANgC,CAAnC;AAQA,sBAAO;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,MAAM,EAAC,SAA1B;AAAoC,IAAA,QAAQ,EAAEE;AAA9C;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;GAZMH,S;;KAAAA,S;;AAcT,SAASQ,QAAT,GAAoB;AAAA;;AAChB,QAAMC,GAAG,GAAGC,MAAM,CAAC,IAAD,CAAlB;AAEA,QAAMC,UAAU,GAAGP,WAAW,CAAC,MAAMQ,IAAN,IAAe;AAC5C,QAAI;AACF;AACA,YAAMC,MAAM,GAAG,IAAIC,QAAJ,EAAf;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0B,UAASC,GAAT,EAAc;AACtCL,QAAAA,MAAM,CAACM,MAAP,CAAcD,GAAd,EAAmB,KAAKA,GAAL,CAAnB;AACD,OAFD,EAEGN,IAFH;AAGA,YAAMQ,GAAG,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAWC,OAAX,EAAoBT,MAApB,EAA4B;AAC5CU,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADmC,OAA5B,CAAlB;AAKAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACD,KAZD,CAYE,OAAMM,GAAN,EAAW;AACXF,MAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AACF,GAhB6B,EAgB3B,EAhB2B,CAA9B;AAkBA,QAAMC,eAAe,GAAGvB,WAAW,CAAEC,CAAD,IAAO;AACzCA,IAAAA,CAAC,CAACuB,cAAF;AACAjB,IAAAA,UAAU,CAAC;AACTV,MAAAA,IAAI,EAAEQ,GAAG,CAACoB,OAAJ,CAAYtB,KAAZ,CAAkB,CAAlB;AADG,KAAD,CAAV;AAGD,GALkC,EAKhC,CAACI,UAAD,CALgC,CAAnC;AAOA,sBACE;AAAM,IAAA,QAAQ,EAAEgB,eAAhB;AAAA,2BACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,MAAM,EAAC,SAA1B;AAAoC,MAAA,GAAG,EAAElB;AAAzC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAMD;;IAlCMD,Q;;MAAAA,Q;AAmCT,SAAQR,SAAR,EAAmBQ,QAAnB","sourcesContent":["import axios from 'axios';\nimport React,{useState} from 'react';\nimport Dropzone from 'react-dropzone';\nfunction InputFile() {\n    const [file, setFile] = useState(null);\n    \n    const onChangeHandler = useCallback((e) => {\n      // ファイル選択がキャンセルされた時は undefined\n      const file = e.target.files[0];\n      setFile(() => {\n        return file ? file : null;\n      });\n    }, []);\n  \n    return <input type=\"file\" accept=\"image/*\" onChange={onChangeHandler} />\n  }  \n\nfunction PostForm() {\n    const ref = useRef(null);\n  \n    const onPostForm = useCallback(async(data) => {\n      try {\n        // Object の data を FormData 形式に変換する\n        const params = new FormData();\n        Object.keys(data).forEach(function(key) {\n          params.append(key, this[key]);\n        }, data);\n        const res = await axios.post(API_URL, params, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n        console.log(res);\n      } catch(err) {\n        console.log(err);\n      }\n    }, []);\n    \n    const onSubmitHandler = useCallback((e) => {\n      e.preventDefault();\n      onPostForm({\n        file: ref.current.files[0],\n      });\n    }, [onPostForm]);\n  \n    return (\n      <form onSubmit={onSubmitHandler}>\n        <input type=\"file\" accept=\"image/*\" ref={ref} />\n        {/* 略 */}\n      </form>\n    );\n  }\nexport {InputFile, PostForm}"]},"metadata":{},"sourceType":"module"}